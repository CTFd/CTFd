import{j as jqueryExports,c as commonjsGlobal,$ as $$1}from"./jquery-BT3bhPE2.js";import{r as requireUtil,_ as _export_sfc,C as CTFd$1,f as dayjs,c as helpers,H as HighlightJS,g as createElementBlock,i as createBaseVNode,w as withDirectives,v as vModelText,t as toDisplayString,j as createCommentVNode,k as createVNode,l as withCtx,T as TransitionGroup,o as openBlock,F as Fragment,m as renderList,n as nunjucks,p as createStaticVNode,q as withModifiers,s as resolveComponent,u as vModelSelect,x as vModelCheckbox,y as createTextVNode,z as withKeys,A as normalizeClass,e as ezQuery,B as bindMarkdownEditor}from"./js/main-D4L0FPhU.js";var tab={exports:{}};/*!
  * Bootstrap tab.js v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */(function(e,t){(function(o,i){e.exports=i(jqueryExports,requireUtil())})(commonjsGlobal,function(o,i){o=o&&o.hasOwnProperty("default")?o.default:o,i=i&&i.hasOwnProperty("default")?i.default:i;function h(m,N){for(var u=0;u<N.length;u++){var n=N[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(m,n.key,n)}}function a(m,N,u){return h(m,u),m}var s="tab",d="4.3.1",l="bs.tab",g="."+l,k=".data-api",F=o.fn[s],b={HIDE:"hide"+g,HIDDEN:"hidden"+g,SHOW:"show"+g,SHOWN:"shown"+g,CLICK_DATA_API:"click"+g+k},p={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},v={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},V=function(){function m(u){this._element=u}var N=m.prototype;return N.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&o(this._element).hasClass(p.ACTIVE)||o(this._element).hasClass(p.DISABLED))){var c,r,_=o(this._element).closest(v.NAV_LIST_GROUP)[0],B=i.getSelectorFromElement(this._element);if(_){var f=_.nodeName==="UL"||_.nodeName==="OL"?v.ACTIVE_UL:v.ACTIVE;r=o.makeArray(o(_).find(f)),r=r[r.length-1]}var C=o.Event(b.HIDE,{relatedTarget:this._element}),y=o.Event(b.SHOW,{relatedTarget:r});if(r&&o(r).trigger(C),o(this._element).trigger(y),!(y.isDefaultPrevented()||C.isDefaultPrevented())){B&&(c=document.querySelector(B)),this._activate(this._element,_);var T=function(){var H=o.Event(b.HIDDEN,{relatedTarget:n._element}),x=o.Event(b.SHOWN,{relatedTarget:r});o(r).trigger(H),o(n._element).trigger(x)};c?this._activate(c,c.parentNode,T):T()}}},N.dispose=function(){o.removeData(this._element,l),this._element=null},N._activate=function(n,c,r){var _=this,B=c&&(c.nodeName==="UL"||c.nodeName==="OL")?o(c).find(v.ACTIVE_UL):o(c).children(v.ACTIVE),f=B[0],C=r&&f&&o(f).hasClass(p.FADE),y=function(){return _._transitionComplete(n,f,r)};if(f&&C){var T=i.getTransitionDurationFromElement(f);o(f).removeClass(p.SHOW).one(i.TRANSITION_END,y).emulateTransitionEnd(T)}else y()},N._transitionComplete=function(n,c,r){if(c){o(c).removeClass(p.ACTIVE);var _=o(c.parentNode).find(v.DROPDOWN_ACTIVE_CHILD)[0];_&&o(_).removeClass(p.ACTIVE),c.getAttribute("role")==="tab"&&c.setAttribute("aria-selected",!1)}if(o(n).addClass(p.ACTIVE),n.getAttribute("role")==="tab"&&n.setAttribute("aria-selected",!0),i.reflow(n),n.classList.contains(p.FADE)&&n.classList.add(p.SHOW),n.parentNode&&o(n.parentNode).hasClass(p.DROPDOWN_MENU)){var B=o(n).closest(v.DROPDOWN)[0];if(B){var f=[].slice.call(B.querySelectorAll(v.DROPDOWN_TOGGLE));o(f).addClass(p.ACTIVE)}n.setAttribute("aria-expanded",!0)}r&&r()},m._jQueryInterface=function(n){return this.each(function(){var c=o(this),r=c.data(l);if(r||(r=new m(this),c.data(l,r)),typeof n=="string"){if(typeof r[n]>"u")throw new TypeError('No method named "'+n+'"');r[n]()}})},a(m,null,[{key:"VERSION",get:function(){return d}}]),m}();return o(document).on(b.CLICK_DATA_API,v.DATA_TOGGLE,function(m){m.preventDefault(),V._jQueryInterface.call(o(this),"show")}),o.fn[s]=V._jQueryInterface,o.fn[s].Constructor=V,o.fn[s].noConflict=function(){return o.fn[s]=F,V._jQueryInterface},V})})(tab);const _sfc_main$b={props:{type:String,id:Number},data:function(){return{page:1,pages:null,next:null,prev:null,total:null,comment:"",comments:[],urlRoot:CTFd$1.config.urlRoot}},methods:{toLocalTime(e){return dayjs(e).format("MMMM Do, h:mm:ss A")},nextPage:function(){this.page++,this.loadComments()},prevPage:function(){this.page--,this.loadComments()},getArgs:function(){let e={};return e[`${this.$props.type}_id`]=this.$props.id,e},loadComments:function(){let e=this.getArgs();e.page=this.page,e.per_page=10,helpers.comments.get_comments(e).then(t=>(this.page=t.meta.pagination.page,this.pages=t.meta.pagination.pages,this.next=t.meta.pagination.next,this.prev=t.meta.pagination.prev,this.total=t.meta.pagination.total,this.comments=t.data,this.comments))},submitComment:function(){let e=this.comment.trim();e.length>0&&helpers.comments.add_comment(e,this.$props.type,this.getArgs(),()=>{this.loadComments()}),this.comment=""},deleteComment:function(e){confirm("Are you sure you'd like to delete this comment?")&&helpers.comments.delete_comment(e).then(t=>{if(t.success===!0)for(let o=this.comments.length-1;o>=0;--o)this.comments[o].id==e&&this.comments.splice(o,1)})}},created(){this.loadComments()},updated(){this.$el.querySelectorAll("pre code").forEach(e=>{HighlightJS.highlightBlock(e)})}},_hoisted_1$b={class:"row mb-3"},_hoisted_2$b={class:"col-md-12"},_hoisted_3$b={class:"comment"},_hoisted_4$b={key:0,class:"row"},_hoisted_5$9={class:"col-md-12"},_hoisted_6$8={class:"text-center"},_hoisted_7$7=["disabled"],_hoisted_8$7=["disabled"],_hoisted_9$3={class:"col-md-12"},_hoisted_10$2={class:"text-center"},_hoisted_11$2={class:"text-muted"},_hoisted_12$2={class:"comments"},_hoisted_13$2={class:"card-body pl-0 pb-0 pt-2 pr-2"},_hoisted_14=["onClick"],_hoisted_15={class:"card-body"},_hoisted_16=["innerHTML"],_hoisted_17={class:"text-muted float-left"},_hoisted_18=["href"],_hoisted_19={class:"text-muted float-right"},_hoisted_20={class:"float-right"},_hoisted_21={key:1,class:"row"},_hoisted_22={class:"col-md-12"},_hoisted_23={class:"text-center"},_hoisted_24=["disabled"],_hoisted_25=["disabled"],_hoisted_26={class:"col-md-12"},_hoisted_27={class:"text-center"},_hoisted_28={class:"text-muted"};function _sfc_render$b(e,t,o,i,h,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$b,[createBaseVNode("div",_hoisted_3$b,[withDirectives(createBaseVNode("textarea",{class:"form-control mb-2",rows:"2",id:"comment-input",placeholder:"Add comment","onUpdate:modelValue":t[0]||(t[0]=s=>e.comment=s)},null,512),[[vModelText,e.comment,void 0,{lazy:!0}]]),createBaseVNode("button",{class:"btn btn-sm btn-success btn-outlined float-right",type:"submit",onClick:t[1]||(t[1]=s=>a.submitComment())}," Comment ")])])]),e.pages>1?(openBlock(),createElementBlock("div",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$8,[createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:t[2]||(t[2]=s=>a.prevPage()),disabled:!e.prev}," <<< ",8,_hoisted_7$7),createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:t[3]||(t[3]=s=>a.nextPage()),disabled:!e.next}," >>> ",8,_hoisted_8$7)])]),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",_hoisted_10$2,[createBaseVNode("small",_hoisted_11$2,"Page "+toDisplayString(e.page)+" of "+toDisplayString(e.total)+" comments",1)])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_12$2,[createVNode(TransitionGroup,{name:"comment-card"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.comments,s=>(openBlock(),createElementBlock("div",{class:"comment-card card mb-2",key:s.id},[createBaseVNode("div",_hoisted_13$2,[createBaseVNode("button",{type:"button",class:"close float-right","aria-label":"Close",onClick:d=>a.deleteComment(s.id)},t[6]||(t[6]=[createBaseVNode("span",{"aria-hidden":"true"},"×",-1)]),8,_hoisted_14)]),createBaseVNode("div",_hoisted_15,[createBaseVNode("div",{class:"card-text",innerHTML:s.html},null,8,_hoisted_16),createBaseVNode("small",_hoisted_17,[createBaseVNode("span",null,[createBaseVNode("a",{href:`${e.urlRoot}/users/${s.author_id}`},toDisplayString(s.author.name),9,_hoisted_18)])]),createBaseVNode("small",_hoisted_19,[createBaseVNode("span",_hoisted_20,toDisplayString(a.toLocalTime(s.date)),1)])])]))),128))]),_:1})]),e.pages>1?(openBlock(),createElementBlock("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[createBaseVNode("div",_hoisted_23,[createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:t[4]||(t[4]=s=>a.prevPage()),disabled:!e.prev}," <<< ",8,_hoisted_24),createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:t[5]||(t[5]=s=>a.nextPage()),disabled:!e.next}," >>> ",8,_hoisted_25)])]),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[createBaseVNode("small",_hoisted_28,"Page "+toDisplayString(e.page)+" of "+toDisplayString(e.total)+" comments",1)])])])):createCommentVNode("",!0)])}const CommentBox=_export_sfc(_sfc_main$b,[["render",_sfc_render$b],["__scopeId","data-v-f12488ed"]]),_sfc_main$a={name:"FlagCreationForm",props:{challenge_id:Number},data:function(){return{types:{},selectedType:null,createForm:""}},methods:{selectType:function(event){let flagType=event.target.value;if(this.types[flagType]===void 0){this.selectedType=null,this.createForm="";return}let createFormURL=this.types[flagType].templates.create;$$1.get(CTFd$1.config.urlRoot+createFormURL,template_data=>{const template=nunjucks.compile(template_data);this.selectedType=flagType,this.createForm=template.render(),this.createForm.includes("<script")&&setTimeout(()=>{$$1("<div>"+this.createForm+"</div>").find("script").each(function(){eval($$1(this).html())})},100)})},loadTypes:function(){CTFd$1.fetch("/userchallenge/api/flags/types",{method:"GET"}).then(e=>e.json()).then(e=>{this.types=e.data})},submitFlag:function(e){let o=$$1(e.target).serializeJSON(!0);o.challenge=this.$props.challenge_id,CTFd$1.fetch("/userchallenge/api/flags",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(i=>i.json()).then(i=>{this.$emit("refreshFlags",this.$options.name)})}},created(){this.loadTypes()}},_hoisted_1$a={id:"flag-create-modal",class:"modal fade",tabindex:"-1"},_hoisted_2$a={class:"modal-dialog modal-lg"},_hoisted_3$a={class:"modal-content"},_hoisted_4$a={class:"modal-body"},_hoisted_5$8={class:"create-keys-select-div"},_hoisted_6$7=["value"],_hoisted_7$6=["innerHTML"],_hoisted_8$6={key:0,class:"btn btn-success float-right",type:"submit"};function _sfc_render$a(e,t,o,i,h,a){return openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$a,[t[5]||(t[5]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3>Create Flag</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>',1)),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("div",_hoisted_5$8,[t[3]||(t[3]=createBaseVNode("label",{for:"create-keys-select",class:"control-label"}," Choose Flag Type ",-1)),createBaseVNode("select",{class:"form-control custom-select",onChange:t[0]||(t[0]=s=>a.selectType(s))},[t[2]||(t[2]=createBaseVNode("option",null,"--",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(e.types),s=>(openBlock(),createElementBlock("option",{value:s,key:s},toDisplayString(s),9,_hoisted_6$7))),128))],32)]),t[4]||(t[4]=createBaseVNode("br",null,null,-1)),createBaseVNode("form",{onSubmit:t[1]||(t[1]=withModifiers((...s)=>a.submitFlag&&a.submitFlag(...s),["prevent"]))},[createBaseVNode("div",{id:"create-flag-form",innerHTML:e.createForm},null,8,_hoisted_7$6),e.createForm?(openBlock(),createElementBlock("button",_hoisted_8$6," Create Flag ")):createCommentVNode("",!0)],32)])])])])}const FlagCreationForm=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]),_sfc_main$9={name:"FlagEditForm",props:{flag_id:Number},data:function(){return{flag:{},editForm:""}},watch:{flag_id:{immediate:!0,handler(e,t){e!==null&&this.loadFlag()}}},methods:{loadFlag:function(){CTFd$1.fetch(`/userchallenge/api/flags/${this.$props.flag_id}`,{method:"GET"}).then(e=>e.json()).then(response=>{this.flag=response.data;let editFormURL=this.flag.templates.update;$$1.get(CTFd$1.config.urlRoot+editFormURL,template_data=>{const template=nunjucks.compile(template_data);this.editForm=template.render(this.flag),this.editForm.includes("<script")&&setTimeout(()=>{$$1("<div>"+this.editForm+"</div>").find("script").each(function(){eval($$1(this).html())})},100)})})},updateFlag:function(e){let o=$$1(e.target).serializeJSON(!0);CTFd$1.fetch(`/userchallenge/api/flags/${this.$props.flag_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(i=>i.json()).then(i=>{this.$emit("refreshFlags",this.$options.name)})}},mounted(){this.flag_id&&this.loadFlag()},created(){this.flag_id&&this.loadFlag()}},_hoisted_1$9={id:"flag-edit-modal",class:"modal fade",tabindex:"-1"},_hoisted_2$9={class:"modal-dialog modal-lg"},_hoisted_3$9={class:"modal-content"},_hoisted_4$9={class:"modal-body"},_hoisted_5$7=["innerHTML"];function _sfc_render$9(e,t,o,i,h,a){return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("div",_hoisted_3$9,[t[1]||(t[1]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3 class="text-center">Edit Flag</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>',1)),createBaseVNode("div",_hoisted_4$9,[createBaseVNode("form",{method:"POST",innerHTML:e.editForm,onSubmit:t[0]||(t[0]=withModifiers((...s)=>a.updateFlag&&a.updateFlag(...s),["prevent"]))},null,40,_hoisted_5$7)])])])])}const FlagEditForm=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]),_sfc_main$8={components:{FlagCreationForm,FlagEditForm},props:{challenge_id:Number},data:function(){return{flags:[],editing_flag_id:null}},methods:{loadFlags:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}/flags`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.flags=e.data)})},refreshFlags(e){this.loadFlags();let t;switch(e){case"FlagEditForm":t=this.$refs.FlagEditForm.$el,$$1(t).modal("hide");break;case"FlagCreationForm":t=this.$refs.FlagCreationForm.$el,$$1(t).modal("hide");break}},addFlag:function(){let e=this.$refs.FlagCreationForm.$el;$$1(e).modal()},editFlag:function(e){this.editing_flag_id=e;let t=this.$refs.FlagEditForm.$el;$$1(t).modal()},deleteFlag:function(e){confirm("Are you sure you'd like to delete this flag?")&&CTFd$1.fetch(`/userchallenge/api/flags/${e}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.success&&this.loadFlags()})}},created(){this.loadFlags()}},_hoisted_1$8={id:"flagsboard",class:"table table-striped"},_hoisted_2$8=["name"],_hoisted_3$8={class:"text-center"},_hoisted_4$8={class:"text-break"},_hoisted_5$6={class:"flag-content"},_hoisted_6$6={class:"text-center"},_hoisted_7$5=["flag-id","flag-type","onClick"],_hoisted_8$5=["flag-id","onClick"],_hoisted_9$2={class:"col-md-12"};function _sfc_render$8(e,t,o,i,h,a){const s=resolveComponent("FlagCreationForm"),d=resolveComponent("FlagEditForm");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(s,{ref:"FlagCreationForm",challenge_id:o.challenge_id,onRefreshFlags:a.refreshFlags},null,8,["challenge_id","onRefreshFlags"])]),createBaseVNode("div",null,[createVNode(d,{ref:"FlagEditForm",flag_id:e.editing_flag_id,onRefreshFlags:a.refreshFlags},null,8,["flag_id","onRefreshFlags"])]),createBaseVNode("table",_hoisted_1$8,[t[1]||(t[1]=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Type")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Flag")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Settings")])])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.flags,l=>(openBlock(),createElementBlock("tr",{name:l.id,key:l.id},[createBaseVNode("td",_hoisted_3$8,toDisplayString(l.type),1),createBaseVNode("td",_hoisted_4$8,[createBaseVNode("pre",_hoisted_5$6,toDisplayString(l.content),1)]),createBaseVNode("td",_hoisted_6$6,[createBaseVNode("i",{role:"button",class:"btn-fa fas fa-edit edit-flag","flag-id":l.id,"flag-type":l.type,onClick:g=>a.editFlag(l.id)},null,8,_hoisted_7$5),createBaseVNode("i",{role:"button",class:"btn-fa fas fa-times delete-flag","flag-id":l.id,onClick:g=>a.deleteFlag(l.id)},null,8,_hoisted_8$5)])],8,_hoisted_2$8))),128))])]),createBaseVNode("div",_hoisted_9$2,[createBaseVNode("button",{id:"flag-add-button",class:"btn btn-success d-inline-block float-right",onClick:t[0]||(t[0]=l=>a.addFlag())}," Create Flag ")])])}const FlagList=_export_sfc(_sfc_main$8,[["render",_sfc_render$8]]),_sfc_main$7={props:{challenge_id:Number},data:function(){return{challenges:[],requirements:{},selectedRequirements:[],selectedAnonymize:!1}},computed:{newRequirements:function(){let e=this.requirements.prerequisites||[],t=this.requirements.anonymize||!1,o=JSON.stringify(e.sort())!==JSON.stringify(this.selectedRequirements.sort()),i=t!==this.selectedAnonymize;return o||i},requiredChallenges:function(){const e=this.requirements.prerequisites||[];return this.challenges.filter(t=>t.id!==this.$props.challenge_id&&e.includes(t.id))},otherChallenges:function(){const e=this.requirements.prerequisites||[];return this.challenges.filter(t=>t.id!==this.$props.challenge_id&&!e.includes(t.id))}},methods:{loadChallenges:function(){CTFd$1.fetch("/api/v1/challenges?view=admin",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.challenges=e.data)})},getChallengeNameById:function(e){let t=this.challenges.find(o=>o.id===e);return t?t.name:""},loadRequirements:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}/requirements`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.requirements=e.data||{},this.selectedRequirements=this.requirements.prerequisites||[],this.selectedAnonymize=this.requirements.anonymize||!1)})},updateRequirements:function(){const t={requirements:{prerequisites:this.selectedRequirements}};this.selectedAnonymize&&(t.requirements.anonymize=!0),CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(o=>o.json()).then(o=>{o.success&&this.loadRequirements()})}},created(){this.loadChallenges(),this.loadRequirements()}},_hoisted_1$7={class:"form-group scrollbox"},_hoisted_2$7={class:"form-check-label cursor-pointer"},_hoisted_3$7=["value"],_hoisted_4$7={class:"form-check-label cursor-pointer"},_hoisted_5$5=["value"],_hoisted_6$5={class:"form-group"},_hoisted_7$4={class:"form-group"},_hoisted_8$4=["disabled"];function _sfc_render$7(e,t,o,i,h,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("form",{onSubmit:t[3]||(t[3]=withModifiers((...s)=>a.updateRequirements&&a.updateRequirements(...s),["prevent"]))},[createBaseVNode("div",_hoisted_1$7,[createVNode(TransitionGroup,{name:"flip-list"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.requiredChallenges,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_2$7,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":t[0]||(t[0]=d=>e.selectedRequirements=d)},null,8,_hoisted_3$7),[[vModelCheckbox,e.selectedRequirements]]),createTextVNode(" "+toDisplayString(s.name),1)])]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.otherChallenges,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_4$7,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":t[1]||(t[1]=d=>e.selectedRequirements=d)},null,8,_hoisted_5$5),[[vModelCheckbox,e.selectedRequirements]]),createTextVNode(" "+toDisplayString(s.name),1)])]))),128))]),_:1})]),createBaseVNode("div",_hoisted_6$5,[t[5]||(t[5]=createBaseVNode("label",null,[createBaseVNode("b",null,"Behavior if not unlocked")],-1)),withDirectives(createBaseVNode("select",{class:"form-control custom-select",name:"anonymize","onUpdate:modelValue":t[2]||(t[2]=s=>e.selectedAnonymize=s)},t[4]||(t[4]=[createBaseVNode("option",{value:!1},"Hidden",-1),createBaseVNode("option",{value:!0},"Anonymized",-1)]),512),[[vModelSelect,e.selectedAnonymize]])]),createBaseVNode("div",_hoisted_7$4,[createBaseVNode("button",{class:"btn btn-success float-right",disabled:!a.newRequirements}," Save ",8,_hoisted_8$4)])],32)])}const Requirements=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-a3fa86b4"]]),_sfc_main$6={props:{challenge_id:Number},data:function(){return{topics:[],topicValue:"",searchedTopic:"",topicResults:[],selectedResultIdx:0,awaitingSearch:!1}},methods:{loadTopics:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}/topics`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.topics=e.data)})},searchTopics:function(){if(this.selectedResultIdx=0,this.topicValue==""){this.topicResults=[];return}CTFd$1.fetch(`/userchallenge/api/topics?field=value&q=${this.topicValue}`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.topicResults=e.data.slice(0,10))})},addTopic:function(){let e;if(this.selectedResultIdx===0)e=this.topicValue;else{let o=this.selectedResultIdx-1;e=this.topicResults[o].value}const t={value:e,challenge:this.$props.challenge_id,type:"challenge"};CTFd$1.fetch("/userchallenge/api/topics",{method:"POST",body:JSON.stringify(t)}).then(o=>o.json()).then(o=>{o.success&&(this.topicValue="",this.loadTopics())})},deleteTopic:function(e){CTFd$1.fetch(`/userchallenge/api/topics?type=challenge&target_id=${e}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.success&&this.loadTopics()})},moveCursor:function(e){switch(e){case"up":this.selectedResultIdx&&(this.selectedResultIdx-=1);break;case"down":this.selectedResultIdx<this.topicResults.length&&(this.selectedResultIdx+=1);break}},selectTopic:function(e){e===void 0&&(e=this.selectedResultIdx);let t=this.topicResults[e];this.topicValue=t.value}},watch:{topicValue:function(e){this.awaitingSearch===!1&&setTimeout(()=>{this.searchTopics(),this.awaitingSearch=!1},500),this.awaitingSearch=!0}},created(){this.loadTopics()}},_hoisted_1$6={class:"col-md-12"},_hoisted_2$6={id:"challenge-topics",class:"my-3"},_hoisted_3$6={class:"mr-1"},_hoisted_4$6=["onClick"],_hoisted_5$4={class:"form-group"},_hoisted_6$4={class:"form-group"},_hoisted_7$3={class:"list-group"},_hoisted_8$3=["onClick"];function _sfc_render$6(e,t,o,i,h,a){return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.topics,s=>(openBlock(),createElementBlock("h5",{class:"challenge-tag",key:s.id},[createBaseVNode("span",_hoisted_3$6,toDisplayString(s.value),1),createBaseVNode("a",{class:"btn-fa delete-tag",onClick:d=>a.deleteTopic(s.id)}," ×",8,_hoisted_4$6)]))),128))]),createBaseVNode("div",_hoisted_5$4,[t[4]||(t[4]=createBaseVNode("label",null,[createTextVNode(" Topic "),createBaseVNode("br"),createBaseVNode("small",{class:"text-muted"},"Type topic and press Enter")],-1)),withDirectives(createBaseVNode("input",{id:"tags-add-input",maxlength:"255",type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>e.topicValue=s),onKeyup:[t[1]||(t[1]=withKeys(s=>a.moveCursor("down"),["down"])),t[2]||(t[2]=withKeys(s=>a.moveCursor("up"),["up"])),t[3]||(t[3]=withKeys(s=>a.addTopic(),["enter"]))]},null,544),[[vModelText,e.topicValue]])]),createBaseVNode("div",_hoisted_6$4,[createBaseVNode("ul",_hoisted_7$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.topicResults,(s,d)=>(openBlock(),createElementBlock("li",{class:normalizeClass({"list-group-item":!0,active:d+1===e.selectedResultIdx}),key:s.id,onClick:l=>a.selectTopic(d)},toDisplayString(s.value),11,_hoisted_8$3))),128))])])])}const TopicsList=_export_sfc(_sfc_main$6,[["render",_sfc_render$6]]),_sfc_main$5={props:{challenge_id:Number},data:function(){return{tags:[],tagValue:""}},methods:{loadTags:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}/tags`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.tags=e.data)})},addTag:function(){if(this.tagValue){const e={value:this.tagValue,challenge:this.$props.challenge_id};CTFd$1.api.post_tag_list({},e).then(t=>{t.success&&(this.tagValue="",this.loadTags())})}},deleteTag:function(e){CTFd$1.api.delete_tag({tagId:e}).then(t=>{t.success&&this.loadTags()})}},created(){this.loadTags()}},_hoisted_1$5={class:"col-md-12"},_hoisted_2$5={id:"challenge-tags",class:"my-3"},_hoisted_3$5=["onClick"],_hoisted_4$5={class:"form-group"};function _sfc_render$5(e,t,o,i,h,a){return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.tags,s=>(openBlock(),createElementBlock("span",{class:"badge badge-primary mx-1 challenge-tag",key:s.id},[createBaseVNode("span",null,toDisplayString(s.value),1),createBaseVNode("a",{class:"btn-fa delete-tag",onClick:d=>a.deleteTag(s.id)}," ×",8,_hoisted_3$5)]))),128))]),createBaseVNode("div",_hoisted_4$5,[t[2]||(t[2]=createBaseVNode("label",null,[createTextVNode("Tag "),createBaseVNode("br"),createBaseVNode("small",{class:"text-muted"},"Type tag and press Enter")],-1)),withDirectives(createBaseVNode("input",{id:"tags-add-input",maxlength:"80",type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>e.tagValue=s),onKeyup:t[1]||(t[1]=withKeys(s=>a.addTag(),["enter"]))},null,544),[[vModelText,e.tagValue]])])])}const TagsList=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]),_sfc_main$4={props:{challenge_id:Number},data:function(){return{files:[],urlRoot:CTFd$1.config.urlRoot}},methods:{loadFiles:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}/files`,{method:"GET"}).then(e=>e.json()).then(e=>{e.success&&(this.files=e.data)})},addFiles:function(){let e={challenge:this.$props.challenge_id,type:"challenge"},t=this.$refs.FileUploadForm;helpers.files.upload(t,e,o=>{setTimeout(()=>{this.loadFiles()},700)})},deleteFile:function(e){ezQuery({title:"Delete Files",body:"Are you sure you want to delete this file?",success:()=>{CTFd$1.fetch(`/userchallenge/api/files/${e}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.success&&this.loadFiles()})}})}},created(){this.loadFiles()}},_hoisted_1$4={id:"filesboard",class:"table table-striped"},_hoisted_2$4={class:"text-center"},_hoisted_3$4=["href"],_hoisted_4$4={class:"text-center"},_hoisted_5$3=["onClick"],_hoisted_6$3={class:"col-md-12 mt-3"};function _sfc_render$4(e,t,o,i,h,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("table",_hoisted_1$4,[t[1]||(t[1]=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"File")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Settings")])])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.files,s=>(openBlock(),createElementBlock("tr",{key:s.id},[createBaseVNode("td",_hoisted_2$4,[createBaseVNode("a",{href:`${e.urlRoot}/files/${s.location}`},toDisplayString(s.location.split("/").pop()),9,_hoisted_3$4)]),createBaseVNode("td",_hoisted_4$4,[createBaseVNode("i",{role:"button",class:"btn-fa fas fa-times delete-file",onClick:d=>a.deleteFile(s.id)},null,8,_hoisted_5$3)])]))),128))])]),createBaseVNode("div",_hoisted_6$3,[createBaseVNode("form",{method:"POST",ref:"FileUploadForm",onSubmit:t[0]||(t[0]=withModifiers((...s)=>a.addFiles&&a.addFiles(...s),["prevent"]))},t[2]||(t[2]=[createStaticVNode('<div class="form-group"><input class="form-control-file" id="file" multiple="" name="file" required="" type="file"><sub class="text-muted"> Attach multiple files using Control+Click or Cmd+Click. </sub></div><div class="form-group"><input class="btn btn-success float-right" id="_submit" name="_submit" type="submit" value="Upload"></div>',2)]),544)])])}const ChallengeFilesList=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),_sfc_main$3={name:"HintCreationForm",props:{challenge_id:Number,hints:Array},data:function(){return{cost:0,selectedHints:[]}},methods:{getCost:function(){return this.cost||0},getContent:function(){return this.$refs.content.value},submitHint:function(){let e={challenge_id:this.$props.challenge_id,content:this.getContent(),cost:this.getCost(),requirements:{prerequisites:this.selectedHints}};CTFd.fetch("/userchallenge/api/hints",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{t.success&&this.$emit("refreshHints",this.$options.name)})}}},_hoisted_1$3={class:"modal fade",tabindex:"-1"},_hoisted_2$3={class:"modal-dialog"},_hoisted_3$3={class:"modal-content"},_hoisted_4$3={class:"modal-body"},_hoisted_5$2={class:"container"},_hoisted_6$2={class:"row"},_hoisted_7$2={class:"col-md-12"},_hoisted_8$2={class:"form-group"},_hoisted_9$1={type:"text",class:"form-control markdown",name:"content",rows:"7",ref:"content"},_hoisted_10$1={class:"form-group"},_hoisted_11$1={class:"form-group"},_hoisted_12$1={class:"form-check-label cursor-pointer"},_hoisted_13$1=["value"];function _sfc_render$3(e,t,o,i,h,a){return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[t[8]||(t[8]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3>Hint</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>',1)),createBaseVNode("form",{method:"POST",onSubmit:t[2]||(t[2]=withModifiers((...s)=>a.submitHint&&a.submitHint(...s),["prevent"]))},[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("div",_hoisted_6$2,[createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[t[3]||(t[3]=createBaseVNode("label",null,[createTextVNode(" Hint"),createBaseVNode("br"),createBaseVNode("small",null,"Markdown & HTML are supported")],-1)),createBaseVNode("textarea",_hoisted_9$1,null,512)]),createBaseVNode("div",_hoisted_10$1,[t[4]||(t[4]=createBaseVNode("label",null,[createTextVNode(" Cost"),createBaseVNode("br"),createBaseVNode("small",null,"How many points it costs to see your hint.")],-1)),withDirectives(createBaseVNode("input",{type:"number",class:"form-control",name:"cost","onUpdate:modelValue":t[0]||(t[0]=s=>e.cost=s)},null,512),[[vModelText,e.cost,void 0,{lazy:!0}]])]),createBaseVNode("div",_hoisted_11$1,[t[5]||(t[5]=createBaseVNode("label",null,[createTextVNode(" Requirements"),createBaseVNode("br"),createBaseVNode("small",null,"Hints that must be unlocked before unlocking this hint")],-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.hints,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_12$1,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":t[1]||(t[1]=d=>e.selectedHints=d)},null,8,_hoisted_13$1),[[vModelCheckbox,e.selectedHints]]),createTextVNode(" "+toDisplayString(s.cost)+" - "+toDisplayString(s.id),1)])]))),128))]),t[6]||(t[6]=createBaseVNode("input",{type:"hidden",id:"hint-id-for-hint",name:"id"},null,-1))])])])]),t[7]||(t[7]=createStaticVNode('<div class="modal-footer"><div class="container"><div class="row"><div class="col-md-12"><button class="btn btn-primary float-right">Submit</button></div></div></div></div>',1))],32)])])])}const HintCreationForm=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2={name:"HintEditForm",props:{challenge_id:Number,hint_id:Number,hints:Array},data:function(){return{cost:0,content:null,selectedHints:[]}},computed:{otherHints:function(){return this.hints.filter(e=>e.id!==this.$props.hint_id)}},watch:{hint_id:{immediate:!0,handler(e,t){e!==null&&this.loadHint()}}},methods:{loadHint:function(){CTFd$1.fetch(`/userchallenge/api/hints/${this.$props.hint_id}?preview=true`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{var t;if(e.success){let o=e.data;this.cost=o.cost,this.content=o.content,this.selectedHints=((t=o.requirements)==null?void 0:t.prerequisites)||[];let i=this.$refs.content;bindMarkdownEditor(i),setTimeout(()=>{i.mde.codemirror.getDoc().setValue(i.value),this._forceRefresh()},200)}})},_forceRefresh:function(){this.$refs.content.mde.codemirror.refresh()},getCost:function(){return this.cost||0},getContent:function(){return this._forceRefresh(),this.$refs.content.mde.codemirror.getDoc().getValue()},updateHint:function(){let e={challenge_id:this.$props.challenge_id,content:this.getContent(),cost:this.getCost(),requirements:{prerequisites:this.selectedHints}};CTFd$1.fetch(`/userchallenge/api/hints/${this.$props.hint_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{t.success&&this.$emit("refreshHints",this.$options.name)})}},mounted(){this.hint_id&&this.loadHint()},created(){this.hint_id&&this.loadHint()}},_hoisted_1$2={class:"modal fade",tabindex:"-1"},_hoisted_2$2={class:"modal-dialog"},_hoisted_3$2={class:"modal-content"},_hoisted_4$2={class:"modal-body"},_hoisted_5$1={class:"container"},_hoisted_6$1={class:"row"},_hoisted_7$1={class:"col-md-12"},_hoisted_8$1={class:"form-group"},_hoisted_9=["value"],_hoisted_10={class:"form-group"},_hoisted_11={class:"form-group"},_hoisted_12={class:"form-check-label cursor-pointer"},_hoisted_13=["value"];function _sfc_render$2(e,t,o,i,h,a){return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[t[7]||(t[7]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3>Hint</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>',1)),createBaseVNode("form",{method:"POST",onSubmit:t[2]||(t[2]=withModifiers((...s)=>a.updateHint&&a.updateHint(...s),["prevent"]))},[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,[createBaseVNode("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,[t[3]||(t[3]=createBaseVNode("label",null,[createTextVNode(" Hint"),createBaseVNode("br"),createBaseVNode("small",null,"Markdown & HTML are supported")],-1)),createBaseVNode("textarea",{type:"text",class:"form-control",name:"content",rows:"7",value:this.content,ref:"content"},null,8,_hoisted_9)]),createBaseVNode("div",_hoisted_10,[t[4]||(t[4]=createBaseVNode("label",null,[createTextVNode(" Cost"),createBaseVNode("br"),createBaseVNode("small",null,"How many points it costs to see your hint.")],-1)),withDirectives(createBaseVNode("input",{type:"number",class:"form-control",name:"cost","onUpdate:modelValue":t[0]||(t[0]=s=>e.cost=s)},null,512),[[vModelText,e.cost,void 0,{lazy:!0}]])]),createBaseVNode("div",_hoisted_11,[t[5]||(t[5]=createBaseVNode("label",null,[createTextVNode(" Requirements"),createBaseVNode("br"),createBaseVNode("small",null,"Hints that must be unlocked before unlocking this hint")],-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.otherHints,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_12,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":t[1]||(t[1]=d=>e.selectedHints=d)},null,8,_hoisted_13),[[vModelCheckbox,e.selectedHints]]),createTextVNode(" "+toDisplayString(s.content)+" - "+toDisplayString(s.cost),1)])]))),128))])])])])]),t[6]||(t[6]=createStaticVNode('<div class="modal-footer"><div class="container"><div class="row"><div class="col-md-12"><button class="btn btn-primary float-right">Submit</button></div></div></div></div>',1))],32)])])])}const HintEditForm=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1={components:{HintCreationForm,HintEditForm},props:{challenge_id:Number},data:function(){return{hints:[],editing_hint_id:null}},methods:{loadHints:async function(){let t=await(await CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}/hints`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return this.hints=t.data,t.success},addHint:function(){let e=this.$refs.HintCreationForm.$el;$(e).modal()},editHint:function(e){this.editing_hint_id=e;let t=this.$refs.HintEditForm.$el;$(t).modal()},refreshHints:function(e){this.loadHints().then(t=>{if(t){let o;switch(e){case"HintCreationForm":o=this.$refs.HintCreationForm.$el,console.log(o),$(o).modal("hide");break;case"HintEditForm":o=this.$refs.HintEditForm.$el,$(o).modal("hide");break}}else alert("An error occurred while updating this hint. Please try again.")})},deleteHint:function(e){ezQuery({title:"Delete Hint",body:"Are you sure you want to delete this hint?",success:()=>{CTFd$1.fetch(`/userchallenge/api/hints/${e}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.success&&this.loadHints()})}})}},created(){this.loadHints()}},_hoisted_1$1={class:"table table-striped"},_hoisted_2$1={class:"text-center"},_hoisted_3$1={class:"text-break"},_hoisted_4$1={class:"text-center"},_hoisted_5={class:"text-center"},_hoisted_6=["onClick"],_hoisted_7=["onClick"],_hoisted_8={class:"col-md-12"};function _sfc_render$1(e,t,o,i,h,a){const s=resolveComponent("HintCreationForm"),d=resolveComponent("HintEditForm");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(s,{ref:"HintCreationForm",challenge_id:o.challenge_id,hints:e.hints,onRefreshHints:a.refreshHints},null,8,["challenge_id","hints","onRefreshHints"])]),createBaseVNode("div",null,[createVNode(d,{ref:"HintEditForm",challenge_id:o.challenge_id,hint_id:e.editing_hint_id,hints:e.hints,onRefreshHints:a.refreshHints},null,8,["challenge_id","hint_id","hints","onRefreshHints"])]),createBaseVNode("table",_hoisted_1$1,[t[1]||(t[1]=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"ID")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Hint")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Cost")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Settings")])])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.hints,l=>(openBlock(),createElementBlock("tr",{key:l.id},[createBaseVNode("td",_hoisted_2$1,toDisplayString(l.type),1),createBaseVNode("td",_hoisted_3$1,[createBaseVNode("pre",null,toDisplayString(l.content),1)]),createBaseVNode("td",_hoisted_4$1,toDisplayString(l.cost),1),createBaseVNode("td",_hoisted_5,[createBaseVNode("i",{role:"button",class:"btn-fa fas fa-edit",onClick:g=>a.editHint(l.id)},null,8,_hoisted_6),createBaseVNode("i",{role:"button",class:"btn-fa fas fa-times",onClick:g=>a.deleteHint(l.id)},null,8,_hoisted_7)])]))),128))])]),createBaseVNode("div",_hoisted_8,[createBaseVNode("button",{class:"btn btn-success float-right",onClick:t[0]||(t[0]=(...l)=>a.addHint&&a.addHint(...l))}," Create Hint ")])])}const HintsList=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),_sfc_main={props:{challenge_id:Number},data:function(){return{challenge:null,challenges:[],selected_id:null}},computed:{updateAvailable:function(){return this.challenge?this.selected_id!=this.challenge.next_id:!1},otherChallenges:function(){return this.challenges.filter(e=>e.id!==this.$props.challenge_id)}},methods:{loadData:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.challenge=e.data,this.selected_id=e.data.next_id)})},loadChallenges:function(){CTFd$1.fetch("/api/v1/challenges?view=admin",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success&&(this.challenges=e.data)})},updateNext:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({next_id:this.selected_id!="null"?this.selected_id:null})}).then(e=>e.json()).then(e=>{e.success&&(this.loadData(),this.loadChallenges())})}},created(){this.loadData(),this.loadChallenges()}},_hoisted_1={class:"form-group"},_hoisted_2=["value"],_hoisted_3={class:"form-group"},_hoisted_4=["disabled"];function _sfc_render(e,t,o,i,h,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("form",{onSubmit:t[1]||(t[1]=withModifiers((...s)=>a.updateNext&&a.updateNext(...s),["prevent"]))},[createBaseVNode("div",_hoisted_1,[t[3]||(t[3]=createBaseVNode("label",null,[createTextVNode(" Next Challenge "),createBaseVNode("br"),createBaseVNode("small",{class:"text-muted"},"Challenge to recommend after solving this challenge")],-1)),withDirectives(createBaseVNode("select",{class:"form-control custom-select","onUpdate:modelValue":t[0]||(t[0]=s=>e.selected_id=s)},[t[2]||(t[2]=createBaseVNode("option",{value:"null"},"--",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.otherChallenges,s=>(openBlock(),createElementBlock("option",{value:s.id,key:s.id},toDisplayString(s.name),9,_hoisted_2))),128))],512),[[vModelSelect,e.selected_id]])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("button",{class:"btn btn-success float-right",disabled:!a.updateAvailable}," Save ",8,_hoisted_4)])],32)])}const NextChallenge=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{ChallengeFilesList as C,FlagList as F,HintsList as H,NextChallenge as N,Requirements as R,TopicsList as T,TagsList as a,CommentBox as b};
