import{r as requireUtil,_ as _export_sfc,C as CTFd$1,d as dayjs,h as helpers,H as HighlightJS,c as createElementBlock,a as createBaseVNode,w as withDirectives,v as vModelText,t as toDisplayString,b as createCommentVNode,e as createVNode,f as withCtx,T as TransitionGroup,o as openBlock,F as Fragment,g as renderList,n as nunjucks,i as createStaticVNode,j as withModifiers,k as resolveComponent,l as vModelSelect,m as vModelCheckbox,p as createTextVNode,q as withKeys,s as normalizeClass,u as ezQuery,x as bindMarkdownEditor,y as htmlEntities,V as Vue,z as bindMarkdownEditors,A as ezAlert,B as ezToast}from"./main-DaXJ4Vkl.js";import{r as requireJquery,c as commonjsGlobal,$ as $$1}from"../jquery-CHTzeeNo.js";var tab={exports:{}};/*!
  * Bootstrap tab.js v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */(function(t,e){(function(o,n){t.exports=n(requireJquery(),requireUtil())})(commonjsGlobal,function(o,n){o=o&&o.hasOwnProperty("default")?o.default:o,n=n&&n.hasOwnProperty("default")?n.default:n;function i(m,N){for(var h=0;h<N.length;h++){var l=N[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(m,l.key,l)}}function a(m,N,h){return h&&i(m,h),m}var s="tab",d="4.3.1",r="bs.tab",g="."+r,k=".data-api",E=o.fn[s],B={HIDE:"hide"+g,HIDDEN:"hidden"+g,SHOW:"show"+g,SHOWN:"shown"+g,CLICK_DATA_API:"click"+g+k},p={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},v={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},V=function(){function m(h){this._element=h}var N=m.prototype;return N.show=function(){var l=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&o(this._element).hasClass(p.ACTIVE)||o(this._element).hasClass(p.DISABLED))){var u,c,_=o(this._element).closest(v.NAV_LIST_GROUP)[0],b=n.getSelectorFromElement(this._element);if(_){var f=_.nodeName==="UL"||_.nodeName==="OL"?v.ACTIVE_UL:v.ACTIVE;c=o.makeArray(o(_).find(f)),c=c[c.length-1]}var y=o.Event(B.HIDE,{relatedTarget:this._element}),C=o.Event(B.SHOW,{relatedTarget:c});if(c&&o(c).trigger(y),o(this._element).trigger(C),!(C.isDefaultPrevented()||y.isDefaultPrevented())){b&&(u=document.querySelector(b)),this._activate(this._element,_);var T=function(){var w=o.Event(B.HIDDEN,{relatedTarget:l._element}),S=o.Event(B.SHOWN,{relatedTarget:c});o(c).trigger(w),o(l._element).trigger(S)};u?this._activate(u,u.parentNode,T):T()}}},N.dispose=function(){o.removeData(this._element,r),this._element=null},N._activate=function(l,u,c){var _=this,b=u&&(u.nodeName==="UL"||u.nodeName==="OL")?o(u).find(v.ACTIVE_UL):o(u).children(v.ACTIVE),f=b[0],y=c&&f&&o(f).hasClass(p.FADE),C=function(){return _._transitionComplete(l,f,c)};if(f&&y){var T=n.getTransitionDurationFromElement(f);o(f).removeClass(p.SHOW).one(n.TRANSITION_END,C).emulateTransitionEnd(T)}else C()},N._transitionComplete=function(l,u,c){if(u){o(u).removeClass(p.ACTIVE);var _=o(u.parentNode).find(v.DROPDOWN_ACTIVE_CHILD)[0];_&&o(_).removeClass(p.ACTIVE),u.getAttribute("role")==="tab"&&u.setAttribute("aria-selected",!1)}if(o(l).addClass(p.ACTIVE),l.getAttribute("role")==="tab"&&l.setAttribute("aria-selected",!0),n.reflow(l),l.classList.contains(p.FADE)&&l.classList.add(p.SHOW),l.parentNode&&o(l.parentNode).hasClass(p.DROPDOWN_MENU)){var b=o(l).closest(v.DROPDOWN)[0];if(b){var f=[].slice.call(b.querySelectorAll(v.DROPDOWN_TOGGLE));o(f).addClass(p.ACTIVE)}l.setAttribute("aria-expanded",!0)}c&&c()},m._jQueryInterface=function(l){return this.each(function(){var u=o(this),c=u.data(r);if(c||(c=new m(this),u.data(r,c)),typeof l=="string"){if(typeof c[l]>"u")throw new TypeError('No method named "'+l+'"');c[l]()}})},a(m,null,[{key:"VERSION",get:function(){return d}}]),m}();return o(document).on(B.CLICK_DATA_API,v.DATA_TOGGLE,function(m){m.preventDefault(),V._jQueryInterface.call(o(this),"show")}),o.fn[s]=V._jQueryInterface,o.fn[s].Constructor=V,o.fn[s].noConflict=function(){return o.fn[s]=E,V._jQueryInterface},V})})(tab);const _sfc_main$b={props:{type:String,id:Number},data:function(){return{page:1,pages:null,next:null,prev:null,total:null,comment:"",comments:[],urlRoot:CTFd$1.config.urlRoot}},methods:{toLocalTime(t){return dayjs(t).format("MMMM Do, h:mm:ss A")},nextPage:function(){this.page++,this.loadComments()},prevPage:function(){this.page--,this.loadComments()},getArgs:function(){let t={};return t[`${this.$props.type}_id`]=this.$props.id,t},loadComments:function(){let t=this.getArgs();t.page=this.page,t.per_page=10,helpers.comments.get_comments(t).then(e=>(this.page=e.meta.pagination.page,this.pages=e.meta.pagination.pages,this.next=e.meta.pagination.next,this.prev=e.meta.pagination.prev,this.total=e.meta.pagination.total,this.comments=e.data,this.comments))},submitComment:function(){let t=this.comment.trim();t.length>0&&helpers.comments.add_comment(t,this.$props.type,this.getArgs(),()=>{this.loadComments()}),this.comment=""},deleteComment:function(t){confirm("Are you sure you'd like to delete this comment?")&&helpers.comments.delete_comment(t).then(e=>{if(e.success===!0)for(let o=this.comments.length-1;o>=0;--o)this.comments[o].id==t&&this.comments.splice(o,1)})}},created(){this.loadComments()},updated(){this.$el.querySelectorAll("pre code").forEach(t=>{HighlightJS.highlightBlock(t)})}},_hoisted_1$b={class:"row mb-3"},_hoisted_2$b={class:"col-md-12"},_hoisted_3$b={class:"comment"},_hoisted_4$b={key:0,class:"row"},_hoisted_5$9={class:"col-md-12"},_hoisted_6$8={class:"text-center"},_hoisted_7$7=["disabled"],_hoisted_8$7=["disabled"],_hoisted_9$3={class:"col-md-12"},_hoisted_10$2={class:"text-center"},_hoisted_11$2={class:"text-muted"},_hoisted_12$2={class:"comments"},_hoisted_13$2={class:"card-body pl-0 pb-0 pt-2 pr-2"},_hoisted_14=["onClick"],_hoisted_15={class:"card-body"},_hoisted_16=["innerHTML"],_hoisted_17={class:"text-muted float-left"},_hoisted_18=["href"],_hoisted_19={class:"text-muted float-right"},_hoisted_20={class:"float-right"},_hoisted_21={key:1,class:"row"},_hoisted_22={class:"col-md-12"},_hoisted_23={class:"text-center"},_hoisted_24=["disabled"],_hoisted_25=["disabled"],_hoisted_26={class:"col-md-12"},_hoisted_27={class:"text-center"},_hoisted_28={class:"text-muted"};function _sfc_render$b(t,e,o,n,i,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$b,[createBaseVNode("div",_hoisted_3$b,[withDirectives(createBaseVNode("textarea",{class:"form-control mb-2",rows:"2",id:"comment-input",placeholder:"Add comment","onUpdate:modelValue":e[0]||(e[0]=s=>t.comment=s)},null,512),[[vModelText,t.comment,void 0,{lazy:!0}]]),createBaseVNode("button",{class:"btn btn-sm btn-success btn-outlined float-right",type:"submit",onClick:e[1]||(e[1]=s=>a.submitComment())}," Comment ")])])]),t.pages>1?(openBlock(),createElementBlock("div",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$8,[createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:e[2]||(e[2]=s=>a.prevPage()),disabled:!t.prev}," <<< ",8,_hoisted_7$7),createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:e[3]||(e[3]=s=>a.nextPage()),disabled:!t.next}," >>> ",8,_hoisted_8$7)])]),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",_hoisted_10$2,[createBaseVNode("small",_hoisted_11$2,"Page "+toDisplayString(t.page)+" of "+toDisplayString(t.total)+" comments",1)])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_12$2,[createVNode(TransitionGroup,{name:"comment-card"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.comments,s=>(openBlock(),createElementBlock("div",{class:"comment-card card mb-2",key:s.id},[createBaseVNode("div",_hoisted_13$2,[createBaseVNode("button",{type:"button",class:"close float-right","aria-label":"Close",onClick:d=>a.deleteComment(s.id)},e[6]||(e[6]=[createBaseVNode("span",{"aria-hidden":"true"},"Ã—",-1)]),8,_hoisted_14)]),createBaseVNode("div",_hoisted_15,[createBaseVNode("div",{class:"card-text",innerHTML:s.html},null,8,_hoisted_16),createBaseVNode("small",_hoisted_17,[createBaseVNode("span",null,[createBaseVNode("a",{href:`${t.urlRoot}/admin/users/${s.author_id}`},toDisplayString(s.author.name),9,_hoisted_18)])]),createBaseVNode("small",_hoisted_19,[createBaseVNode("span",_hoisted_20,toDisplayString(a.toLocalTime(s.date)),1)])])]))),128))]),_:1})]),t.pages>1?(openBlock(),createElementBlock("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[createBaseVNode("div",_hoisted_23,[createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:e[4]||(e[4]=s=>a.prevPage()),disabled:!t.prev}," <<< ",8,_hoisted_24),createBaseVNode("button",{type:"button",class:"btn btn-link p-0",onClick:e[5]||(e[5]=s=>a.nextPage()),disabled:!t.next}," >>> ",8,_hoisted_25)])]),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[createBaseVNode("small",_hoisted_28,"Page "+toDisplayString(t.page)+" of "+toDisplayString(t.total)+" comments",1)])])])):createCommentVNode("",!0)])}const CommentBox=_export_sfc(_sfc_main$b,[["render",_sfc_render$b],["__scopeId","data-v-aa95975f"]]),_sfc_main$a={name:"FlagCreationForm",props:{challenge_id:Number},data:function(){return{types:{},selectedType:null,createForm:""}},methods:{selectType:function(event){let flagType=event.target.value;if(this.types[flagType]===void 0){this.selectedType=null,this.createForm="";return}let createFormURL=this.types[flagType].templates.create;$$1.get(CTFd$1.config.urlRoot+createFormURL,template_data=>{const template=nunjucks.compile(template_data);this.selectedType=flagType,this.createForm=template.render(),this.createForm.includes("<script")&&setTimeout(()=>{$$1("<div>"+this.createForm+"</div>").find("script").each(function(){eval($$1(this).html())})},100)})},loadTypes:function(){CTFd$1.fetch("/userchallenge/api/flags/types",{method:"GET"}).then(t=>t.json()).then(t=>{this.types=t.data})},submitFlag:function(t){let o=$$1(t.target).serializeJSON(!0);o.challenge=this.$props.challenge_id,CTFd$1.fetch("/userchallenge/api/flags",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(n=>n.json()).then(n=>{this.$emit("refreshFlags",this.$options.name)})}},created(){this.loadTypes()}},_hoisted_1$a={id:"flag-create-modal",class:"modal fade",tabindex:"-1"},_hoisted_2$a={class:"modal-dialog modal-lg"},_hoisted_3$a={class:"modal-content"},_hoisted_4$a={class:"modal-body"},_hoisted_5$8={class:"create-keys-select-div"},_hoisted_6$7=["value"],_hoisted_7$6=["innerHTML"],_hoisted_8$6={key:0,class:"btn btn-success float-right",type:"submit"};function _sfc_render$a(t,e,o,n,i,a){return openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$a,[e[5]||(e[5]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3>Create Flag</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div>',1)),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("div",_hoisted_5$8,[e[3]||(e[3]=createBaseVNode("label",{for:"create-keys-select",class:"control-label"}," Choose Flag Type ",-1)),createBaseVNode("select",{class:"form-control custom-select",onChange:e[0]||(e[0]=s=>a.selectType(s))},[e[2]||(e[2]=createBaseVNode("option",null,"--",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(t.types),s=>(openBlock(),createElementBlock("option",{value:s,key:s},toDisplayString(s),9,_hoisted_6$7))),128))],32)]),e[4]||(e[4]=createBaseVNode("br",null,null,-1)),createBaseVNode("form",{onSubmit:e[1]||(e[1]=withModifiers((...s)=>a.submitFlag&&a.submitFlag(...s),["prevent"]))},[createBaseVNode("div",{id:"create-flag-form",innerHTML:t.createForm},null,8,_hoisted_7$6),t.createForm?(openBlock(),createElementBlock("button",_hoisted_8$6," Create Flag ")):createCommentVNode("",!0)],32)])])])])}const FlagCreationForm=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]),_sfc_main$9={name:"FlagEditForm",props:{flag_id:Number},data:function(){return{flag:{},editForm:""}},watch:{flag_id:{immediate:!0,handler(t,e){t!==null&&this.loadFlag()}}},methods:{loadFlag:function(){CTFd$1.fetch(`/userchallenge/api/flags/${this.$props.flag_id}`,{method:"GET"}).then(t=>t.json()).then(response=>{this.flag=response.data;let editFormURL=this.flag.templates.update;$$1.get(CTFd$1.config.urlRoot+editFormURL,template_data=>{const template=nunjucks.compile(template_data);this.editForm=template.render(this.flag),this.editForm.includes("<script")&&setTimeout(()=>{$$1("<div>"+this.editForm+"</div>").find("script").each(function(){eval($$1(this).html())})},100)})})},updateFlag:function(t){let o=$$1(t.target).serializeJSON(!0);CTFd$1.fetch(`/userchallenge/api/flags/${this.$props.flag_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(n=>n.json()).then(n=>{this.$emit("refreshFlags",this.$options.name)})}},mounted(){this.flag_id&&this.loadFlag()},created(){this.flag_id&&this.loadFlag()}},_hoisted_1$9={id:"flag-edit-modal",class:"modal fade",tabindex:"-1"},_hoisted_2$9={class:"modal-dialog modal-lg"},_hoisted_3$9={class:"modal-content"},_hoisted_4$9={class:"modal-body"},_hoisted_5$7=["innerHTML"];function _sfc_render$9(t,e,o,n,i,a){return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("div",_hoisted_3$9,[e[1]||(e[1]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3 class="text-center">Edit Flag</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div>',1)),createBaseVNode("div",_hoisted_4$9,[createBaseVNode("form",{method:"POST",innerHTML:t.editForm,onSubmit:e[0]||(e[0]=withModifiers((...s)=>a.updateFlag&&a.updateFlag(...s),["prevent"]))},null,40,_hoisted_5$7)])])])])}const FlagEditForm=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]),_sfc_main$8={components:{FlagCreationForm,FlagEditForm},props:{challenge_id:Number},data:function(){return{flags:[],editing_flag_id:null}},methods:{loadFlags:function(){CTFd$1.fetch(`/userchallenge/api/challenges/${this.$props.challenge_id}/flags`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.flags=t.data)})},refreshFlags(t){this.loadFlags();let e;switch(t){case"FlagEditForm":e=this.$refs.FlagEditForm.$el,$$1(e).modal("hide");break;case"FlagCreationForm":e=this.$refs.FlagCreationForm.$el,$$1(e).modal("hide");break}},addFlag:function(){let t=this.$refs.FlagCreationForm.$el;$$1(t).modal()},editFlag:function(t){this.editing_flag_id=t;let e=this.$refs.FlagEditForm.$el;$$1(e).modal()},deleteFlag:function(t){confirm("Are you sure you'd like to delete this flag?")&&CTFd$1.fetch(`/userchallenge/api/flags/${t}`,{method:"DELETE"}).then(e=>e.json()).then(e=>{e.success&&this.loadFlags()})}},created(){this.loadFlags()}},_hoisted_1$8={id:"flagsboard",class:"table table-striped"},_hoisted_2$8=["name"],_hoisted_3$8={class:"text-center"},_hoisted_4$8={class:"text-break"},_hoisted_5$6={class:"flag-content"},_hoisted_6$6={class:"text-center"},_hoisted_7$5=["flag-id","flag-type","onClick"],_hoisted_8$5=["flag-id","onClick"],_hoisted_9$2={class:"col-md-12"};function _sfc_render$8(t,e,o,n,i,a){const s=resolveComponent("FlagCreationForm"),d=resolveComponent("FlagEditForm");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(s,{ref:"FlagCreationForm",challenge_id:o.challenge_id,onRefreshFlags:a.refreshFlags},null,8,["challenge_id","onRefreshFlags"])]),createBaseVNode("div",null,[createVNode(d,{ref:"FlagEditForm",flag_id:t.editing_flag_id,onRefreshFlags:a.refreshFlags},null,8,["flag_id","onRefreshFlags"])]),createBaseVNode("table",_hoisted_1$8,[e[1]||(e[1]=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Type")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Flag")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Settings")])])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.flags,r=>(openBlock(),createElementBlock("tr",{name:r.id,key:r.id},[createBaseVNode("td",_hoisted_3$8,toDisplayString(r.type),1),createBaseVNode("td",_hoisted_4$8,[createBaseVNode("pre",_hoisted_5$6,toDisplayString(r.content),1)]),createBaseVNode("td",_hoisted_6$6,[createBaseVNode("i",{role:"button",class:"btn-fa fas fa-edit edit-flag","flag-id":r.id,"flag-type":r.type,onClick:g=>a.editFlag(r.id)},null,8,_hoisted_7$5),createBaseVNode("i",{role:"button",class:"btn-fa fas fa-times delete-flag","flag-id":r.id,onClick:g=>a.deleteFlag(r.id)},null,8,_hoisted_8$5)])],8,_hoisted_2$8))),128))])]),createBaseVNode("div",_hoisted_9$2,[createBaseVNode("button",{id:"flag-add-button",class:"btn btn-success d-inline-block float-right",onClick:e[0]||(e[0]=r=>a.addFlag())}," Create Flag ")])])}const FlagList=_export_sfc(_sfc_main$8,[["render",_sfc_render$8]]),_sfc_main$7={props:{challenge_id:Number},data:function(){return{challenges:[],requirements:{},selectedRequirements:[],selectedAnonymize:!1}},computed:{newRequirements:function(){let t=this.requirements.prerequisites||[],e=this.requirements.anonymize||!1,o=JSON.stringify(t.sort())!==JSON.stringify(this.selectedRequirements.sort()),n=e!==this.selectedAnonymize;return o||n},requiredChallenges:function(){const t=this.requirements.prerequisites||[];return this.challenges.filter(e=>e.id!==this.$props.challenge_id&&t.includes(e.id))},otherChallenges:function(){const t=this.requirements.prerequisites||[];return this.challenges.filter(e=>e.id!==this.$props.challenge_id&&!t.includes(e.id))}},methods:{loadChallenges:function(){CTFd$1.fetch("/api/v1/challenges?view=admin",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.challenges=t.data)})},getChallengeNameById:function(t){let e=this.challenges.find(o=>o.id===t);return e?e.name:""},loadRequirements:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}/requirements`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.requirements=t.data||{},this.selectedRequirements=this.requirements.prerequisites||[],this.selectedAnonymize=this.requirements.anonymize||!1)})},updateRequirements:function(){const e={requirements:{prerequisites:this.selectedRequirements}};this.selectedAnonymize&&(e.requirements.anonymize=!0),CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>o.json()).then(o=>{o.success&&this.loadRequirements()})}},created(){this.loadChallenges(),this.loadRequirements()}},_hoisted_1$7={class:"form-group scrollbox"},_hoisted_2$7={class:"form-check-label cursor-pointer"},_hoisted_3$7=["value"],_hoisted_4$7={class:"form-check-label cursor-pointer"},_hoisted_5$5=["value"],_hoisted_6$5={class:"form-group"},_hoisted_7$4={class:"form-group"},_hoisted_8$4=["disabled"];function _sfc_render$7(t,e,o,n,i,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("form",{onSubmit:e[3]||(e[3]=withModifiers((...s)=>a.updateRequirements&&a.updateRequirements(...s),["prevent"]))},[createBaseVNode("div",_hoisted_1$7,[createVNode(TransitionGroup,{name:"flip-list"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.requiredChallenges,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_2$7,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":e[0]||(e[0]=d=>t.selectedRequirements=d)},null,8,_hoisted_3$7),[[vModelCheckbox,t.selectedRequirements]]),createTextVNode(" "+toDisplayString(s.name),1)])]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.otherChallenges,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_4$7,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":e[1]||(e[1]=d=>t.selectedRequirements=d)},null,8,_hoisted_5$5),[[vModelCheckbox,t.selectedRequirements]]),createTextVNode(" "+toDisplayString(s.name),1)])]))),128))]),_:1})]),createBaseVNode("div",_hoisted_6$5,[e[5]||(e[5]=createBaseVNode("label",null,[createBaseVNode("b",null,"Behavior if not unlocked")],-1)),withDirectives(createBaseVNode("select",{class:"form-control custom-select",name:"anonymize","onUpdate:modelValue":e[2]||(e[2]=s=>t.selectedAnonymize=s)},e[4]||(e[4]=[createBaseVNode("option",{value:!1},"Hidden",-1),createBaseVNode("option",{value:!0},"Anonymized",-1)]),512),[[vModelSelect,t.selectedAnonymize]])]),createBaseVNode("div",_hoisted_7$4,[createBaseVNode("button",{class:"btn btn-success float-right",disabled:!a.newRequirements}," Save ",8,_hoisted_8$4)])],32)])}const Requirements=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-a3fa86b4"]]),_sfc_main$6={props:{challenge_id:Number},data:function(){return{topics:[],topicValue:"",searchedTopic:"",topicResults:[],selectedResultIdx:0,awaitingSearch:!1}},methods:{loadTopics:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}/topics`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.topics=t.data)})},searchTopics:function(){if(this.selectedResultIdx=0,this.topicValue==""){this.topicResults=[];return}CTFd$1.fetch(`/api/v1/topics?field=value&q=${this.topicValue}`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.topicResults=t.data.slice(0,10))})},addTopic:function(){let t;if(this.selectedResultIdx===0)t=this.topicValue;else{let o=this.selectedResultIdx-1;t=this.topicResults[o].value}const e={value:t,challenge:this.$props.challenge_id,type:"challenge"};CTFd$1.fetch("/api/v1/topics",{method:"POST",body:JSON.stringify(e)}).then(o=>o.json()).then(o=>{o.success&&(this.topicValue="",this.loadTopics())})},deleteTopic:function(t){CTFd$1.fetch(`/api/v1/topics?type=challenge&target_id=${t}`,{method:"DELETE"}).then(e=>e.json()).then(e=>{e.success&&this.loadTopics()})},moveCursor:function(t){switch(t){case"up":this.selectedResultIdx&&(this.selectedResultIdx-=1);break;case"down":this.selectedResultIdx<this.topicResults.length&&(this.selectedResultIdx+=1);break}},selectTopic:function(t){t===void 0&&(t=this.selectedResultIdx);let e=this.topicResults[t];this.topicValue=e.value}},watch:{topicValue:function(t){this.awaitingSearch===!1&&setTimeout(()=>{this.searchTopics(),this.awaitingSearch=!1},500),this.awaitingSearch=!0}},created(){this.loadTopics()}},_hoisted_1$6={class:"col-md-12"},_hoisted_2$6={id:"challenge-topics",class:"my-3"},_hoisted_3$6={class:"mr-1"},_hoisted_4$6=["onClick"],_hoisted_5$4={class:"form-group"},_hoisted_6$4={class:"form-group"},_hoisted_7$3={class:"list-group"},_hoisted_8$3=["onClick"];function _sfc_render$6(t,e,o,n,i,a){return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.topics,s=>(openBlock(),createElementBlock("h5",{class:"challenge-tag",key:s.id},[createBaseVNode("span",_hoisted_3$6,toDisplayString(s.value),1),createBaseVNode("a",{class:"btn-fa delete-tag",onClick:d=>a.deleteTopic(s.id)}," Ã—",8,_hoisted_4$6)]))),128))]),createBaseVNode("div",_hoisted_5$4,[e[4]||(e[4]=createBaseVNode("label",null,[createTextVNode(" Topic "),createBaseVNode("br"),createBaseVNode("small",{class:"text-muted"},"Type topic and press Enter")],-1)),withDirectives(createBaseVNode("input",{id:"tags-add-input",maxlength:"255",type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>t.topicValue=s),onKeyup:[e[1]||(e[1]=withKeys(s=>a.moveCursor("down"),["down"])),e[2]||(e[2]=withKeys(s=>a.moveCursor("up"),["up"])),e[3]||(e[3]=withKeys(s=>a.addTopic(),["enter"]))]},null,544),[[vModelText,t.topicValue]])]),createBaseVNode("div",_hoisted_6$4,[createBaseVNode("ul",_hoisted_7$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.topicResults,(s,d)=>(openBlock(),createElementBlock("li",{class:normalizeClass({"list-group-item":!0,active:d+1===t.selectedResultIdx}),key:s.id,onClick:r=>a.selectTopic(d)},toDisplayString(s.value),11,_hoisted_8$3))),128))])])])}const TopicsList=_export_sfc(_sfc_main$6,[["render",_sfc_render$6]]),_sfc_main$5={props:{challenge_id:Number},data:function(){return{tags:[],tagValue:""}},methods:{loadTags:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}/tags`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.tags=t.data)})},addTag:function(){if(this.tagValue){const t={value:this.tagValue,challenge:this.$props.challenge_id};CTFd$1.api.post_tag_list({},t).then(e=>{e.success&&(this.tagValue="",this.loadTags())})}},deleteTag:function(t){CTFd$1.api.delete_tag({tagId:t}).then(e=>{e.success&&this.loadTags()})}},created(){this.loadTags()}},_hoisted_1$5={class:"col-md-12"},_hoisted_2$5={id:"challenge-tags",class:"my-3"},_hoisted_3$5=["onClick"],_hoisted_4$5={class:"form-group"};function _sfc_render$5(t,e,o,n,i,a){return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.tags,s=>(openBlock(),createElementBlock("span",{class:"badge badge-primary mx-1 challenge-tag",key:s.id},[createBaseVNode("span",null,toDisplayString(s.value),1),createBaseVNode("a",{class:"btn-fa delete-tag",onClick:d=>a.deleteTag(s.id)}," Ã—",8,_hoisted_3$5)]))),128))]),createBaseVNode("div",_hoisted_4$5,[e[2]||(e[2]=createBaseVNode("label",null,[createTextVNode("Tag "),createBaseVNode("br"),createBaseVNode("small",{class:"text-muted"},"Type tag and press Enter")],-1)),withDirectives(createBaseVNode("input",{id:"tags-add-input",maxlength:"80",type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>t.tagValue=s),onKeyup:e[1]||(e[1]=withKeys(s=>a.addTag(),["enter"]))},null,544),[[vModelText,t.tagValue]])])])}const TagsList=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]),_sfc_main$4={props:{challenge_id:Number},data:function(){return{files:[],urlRoot:CTFd$1.config.urlRoot}},methods:{loadFiles:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}/files`,{method:"GET"}).then(t=>t.json()).then(t=>{t.success&&(this.files=t.data)})},addFiles:function(){let t={challenge:this.$props.challenge_id,type:"challenge"},e=this.$refs.FileUploadForm;helpers.files.upload(e,t,o=>{setTimeout(()=>{this.loadFiles()},700)})},deleteFile:function(t){ezQuery({title:"Delete Files",body:"Are you sure you want to delete this file?",success:()=>{CTFd$1.fetch(`/api/v1/files/${t}`,{method:"DELETE"}).then(e=>e.json()).then(e=>{e.success&&this.loadFiles()})}})}},created(){this.loadFiles()}},_hoisted_1$4={id:"filesboard",class:"table table-striped"},_hoisted_2$4={class:"text-center"},_hoisted_3$4=["href"],_hoisted_4$4={class:"text-center"},_hoisted_5$3=["onClick"],_hoisted_6$3={class:"col-md-12 mt-3"};function _sfc_render$4(t,e,o,n,i,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("table",_hoisted_1$4,[e[1]||(e[1]=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"File")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Settings")])])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.files,s=>(openBlock(),createElementBlock("tr",{key:s.id},[createBaseVNode("td",_hoisted_2$4,[createBaseVNode("a",{href:`${t.urlRoot}/files/${s.location}`},toDisplayString(s.location.split("/").pop()),9,_hoisted_3$4)]),createBaseVNode("td",_hoisted_4$4,[createBaseVNode("i",{role:"button",class:"btn-fa fas fa-times delete-file",onClick:d=>a.deleteFile(s.id)},null,8,_hoisted_5$3)])]))),128))])]),createBaseVNode("div",_hoisted_6$3,[createBaseVNode("form",{method:"POST",ref:"FileUploadForm",onSubmit:e[0]||(e[0]=withModifiers((...s)=>a.addFiles&&a.addFiles(...s),["prevent"]))},e[2]||(e[2]=[createStaticVNode('<div class="form-group"><input class="form-control-file" id="file" multiple="" name="file" required="" type="file"><sub class="text-muted"> Attach multiple files using Control+Click or Cmd+Click. </sub></div><div class="form-group"><input class="btn btn-success float-right" id="_submit" name="_submit" type="submit" value="Upload"></div>',2)]),544)])])}const ChallengeFilesList=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),_sfc_main$3={name:"HintCreationForm",props:{challenge_id:Number,hints:Array},data:function(){return{cost:0,selectedHints:[]}},methods:{getCost:function(){return this.cost||0},getContent:function(){return this.$refs.content.value},submitHint:function(){let t={challenge_id:this.$props.challenge_id,content:this.getContent(),cost:this.getCost(),requirements:{prerequisites:this.selectedHints}};CTFd.fetch("/api/v1/hints",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{e.success&&this.$emit("refreshHints",this.$options.name)})}}},_hoisted_1$3={class:"modal fade",tabindex:"-1"},_hoisted_2$3={class:"modal-dialog"},_hoisted_3$3={class:"modal-content"},_hoisted_4$3={class:"modal-body"},_hoisted_5$2={class:"container"},_hoisted_6$2={class:"row"},_hoisted_7$2={class:"col-md-12"},_hoisted_8$2={class:"form-group"},_hoisted_9$1={type:"text",class:"form-control markdown",name:"content",rows:"7",ref:"content"},_hoisted_10$1={class:"form-group"},_hoisted_11$1={class:"form-group"},_hoisted_12$1={class:"form-check-label cursor-pointer"},_hoisted_13$1=["value"];function _sfc_render$3(t,e,o,n,i,a){return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[e[8]||(e[8]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3>Hint</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div>',1)),createBaseVNode("form",{method:"POST",onSubmit:e[2]||(e[2]=withModifiers((...s)=>a.submitHint&&a.submitHint(...s),["prevent"]))},[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("div",_hoisted_6$2,[createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[e[3]||(e[3]=createBaseVNode("label",null,[createTextVNode(" Hint"),createBaseVNode("br"),createBaseVNode("small",null,"Markdown & HTML are supported")],-1)),createBaseVNode("textarea",_hoisted_9$1,null,512)]),createBaseVNode("div",_hoisted_10$1,[e[4]||(e[4]=createBaseVNode("label",null,[createTextVNode(" Cost"),createBaseVNode("br"),createBaseVNode("small",null,"How many points it costs to see your hint.")],-1)),withDirectives(createBaseVNode("input",{type:"number",class:"form-control",name:"cost","onUpdate:modelValue":e[0]||(e[0]=s=>t.cost=s)},null,512),[[vModelText,t.cost,void 0,{lazy:!0}]])]),createBaseVNode("div",_hoisted_11$1,[e[5]||(e[5]=createBaseVNode("label",null,[createTextVNode(" Requirements"),createBaseVNode("br"),createBaseVNode("small",null,"Hints that must be unlocked before unlocking this hint")],-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.hints,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_12$1,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":e[1]||(e[1]=d=>t.selectedHints=d)},null,8,_hoisted_13$1),[[vModelCheckbox,t.selectedHints]]),createTextVNode(" "+toDisplayString(s.cost)+" - "+toDisplayString(s.id),1)])]))),128))]),e[6]||(e[6]=createBaseVNode("input",{type:"hidden",id:"hint-id-for-hint",name:"id"},null,-1))])])])]),e[7]||(e[7]=createStaticVNode('<div class="modal-footer"><div class="container"><div class="row"><div class="col-md-12"><button class="btn btn-primary float-right">Submit</button></div></div></div></div>',1))],32)])])])}const HintCreationForm=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2={name:"HintEditForm",props:{challenge_id:Number,hint_id:Number,hints:Array},data:function(){return{cost:0,content:null,selectedHints:[]}},computed:{otherHints:function(){return this.hints.filter(t=>t.id!==this.$props.hint_id)}},watch:{hint_id:{immediate:!0,handler(t,e){t!==null&&this.loadHint()}}},methods:{loadHint:function(){CTFd$1.fetch(`/api/v1/hints/${this.$props.hint_id}?preview=true`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{var e;if(t.success){let o=t.data;this.cost=o.cost,this.content=o.content,this.selectedHints=((e=o.requirements)==null?void 0:e.prerequisites)||[];let n=this.$refs.content;bindMarkdownEditor(n),setTimeout(()=>{n.mde.codemirror.getDoc().setValue(n.value),this._forceRefresh()},200)}})},_forceRefresh:function(){this.$refs.content.mde.codemirror.refresh()},getCost:function(){return this.cost||0},getContent:function(){return this._forceRefresh(),this.$refs.content.mde.codemirror.getDoc().getValue()},updateHint:function(){let t={challenge_id:this.$props.challenge_id,content:this.getContent(),cost:this.getCost(),requirements:{prerequisites:this.selectedHints}};CTFd$1.fetch(`/api/v1/hints/${this.$props.hint_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{e.success&&this.$emit("refreshHints",this.$options.name)})}},mounted(){this.hint_id&&this.loadHint()},created(){this.hint_id&&this.loadHint()}},_hoisted_1$2={class:"modal fade",tabindex:"-1"},_hoisted_2$2={class:"modal-dialog"},_hoisted_3$2={class:"modal-content"},_hoisted_4$2={class:"modal-body"},_hoisted_5$1={class:"container"},_hoisted_6$1={class:"row"},_hoisted_7$1={class:"col-md-12"},_hoisted_8$1={class:"form-group"},_hoisted_9=["value"],_hoisted_10={class:"form-group"},_hoisted_11={class:"form-group"},_hoisted_12={class:"form-check-label cursor-pointer"},_hoisted_13=["value"];function _sfc_render$2(t,e,o,n,i,a){return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[e[7]||(e[7]=createStaticVNode('<div class="modal-header text-center"><div class="container"><div class="row"><div class="col-md-12"><h3>Hint</h3></div></div></div><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div>',1)),createBaseVNode("form",{method:"POST",onSubmit:e[2]||(e[2]=withModifiers((...s)=>a.updateHint&&a.updateHint(...s),["prevent"]))},[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,[createBaseVNode("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,[e[3]||(e[3]=createBaseVNode("label",null,[createTextVNode(" Hint"),createBaseVNode("br"),createBaseVNode("small",null,"Markdown & HTML are supported")],-1)),createBaseVNode("textarea",{type:"text",class:"form-control",name:"content",rows:"7",value:this.content,ref:"content"},null,8,_hoisted_9)]),createBaseVNode("div",_hoisted_10,[e[4]||(e[4]=createBaseVNode("label",null,[createTextVNode(" Cost"),createBaseVNode("br"),createBaseVNode("small",null,"How many points it costs to see your hint.")],-1)),withDirectives(createBaseVNode("input",{type:"number",class:"form-control",name:"cost","onUpdate:modelValue":e[0]||(e[0]=s=>t.cost=s)},null,512),[[vModelText,t.cost,void 0,{lazy:!0}]])]),createBaseVNode("div",_hoisted_11,[e[5]||(e[5]=createBaseVNode("label",null,[createTextVNode(" Requirements"),createBaseVNode("br"),createBaseVNode("small",null,"Hints that must be unlocked before unlocking this hint")],-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.otherHints,s=>(openBlock(),createElementBlock("div",{class:"form-check",key:s.id},[createBaseVNode("label",_hoisted_12,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":e[1]||(e[1]=d=>t.selectedHints=d)},null,8,_hoisted_13),[[vModelCheckbox,t.selectedHints]]),createTextVNode(" "+toDisplayString(s.content)+" - "+toDisplayString(s.cost),1)])]))),128))])])])])]),e[6]||(e[6]=createStaticVNode('<div class="modal-footer"><div class="container"><div class="row"><div class="col-md-12"><button class="btn btn-primary float-right">Submit</button></div></div></div></div>',1))],32)])])])}const HintEditForm=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1={components:{HintCreationForm,HintEditForm},props:{challenge_id:Number},data:function(){return{hints:[],editing_hint_id:null}},methods:{loadHints:async function(){let e=await(await CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}/hints`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return this.hints=e.data,e.success},addHint:function(){let t=this.$refs.HintCreationForm.$el;$(t).modal()},editHint:function(t){this.editing_hint_id=t;let e=this.$refs.HintEditForm.$el;$(e).modal()},refreshHints:function(t){this.loadHints().then(e=>{if(e){let o;switch(t){case"HintCreationForm":o=this.$refs.HintCreationForm.$el,console.log(o),$(o).modal("hide");break;case"HintEditForm":o=this.$refs.HintEditForm.$el,$(o).modal("hide");break}}else alert("An error occurred while updating this hint. Please try again.")})},deleteHint:function(t){ezQuery({title:"Delete Hint",body:"Are you sure you want to delete this hint?",success:()=>{CTFd$1.fetch(`/api/v1/hints/${t}`,{method:"DELETE"}).then(e=>e.json()).then(e=>{e.success&&this.loadHints()})}})}},created(){this.loadHints()}},_hoisted_1$1={class:"table table-striped"},_hoisted_2$1={class:"text-center"},_hoisted_3$1={class:"text-break"},_hoisted_4$1={class:"text-center"},_hoisted_5={class:"text-center"},_hoisted_6=["onClick"],_hoisted_7=["onClick"],_hoisted_8={class:"col-md-12"};function _sfc_render$1(t,e,o,n,i,a){const s=resolveComponent("HintCreationForm"),d=resolveComponent("HintEditForm");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[createVNode(s,{ref:"HintCreationForm",challenge_id:o.challenge_id,hints:t.hints,onRefreshHints:a.refreshHints},null,8,["challenge_id","hints","onRefreshHints"])]),createBaseVNode("div",null,[createVNode(d,{ref:"HintEditForm",challenge_id:o.challenge_id,hint_id:t.editing_hint_id,hints:t.hints,onRefreshHints:a.refreshHints},null,8,["challenge_id","hint_id","hints","onRefreshHints"])]),createBaseVNode("table",_hoisted_1$1,[e[1]||(e[1]=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"ID")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Hint")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Cost")]),createBaseVNode("td",{class:"text-center"},[createBaseVNode("b",null,"Settings")])])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.hints,r=>(openBlock(),createElementBlock("tr",{key:r.id},[createBaseVNode("td",_hoisted_2$1,toDisplayString(r.type),1),createBaseVNode("td",_hoisted_3$1,[createBaseVNode("pre",null,toDisplayString(r.content),1)]),createBaseVNode("td",_hoisted_4$1,toDisplayString(r.cost),1),createBaseVNode("td",_hoisted_5,[createBaseVNode("i",{role:"button",class:"btn-fa fas fa-edit",onClick:g=>a.editHint(r.id)},null,8,_hoisted_6),createBaseVNode("i",{role:"button",class:"btn-fa fas fa-times",onClick:g=>a.deleteHint(r.id)},null,8,_hoisted_7)])]))),128))])]),createBaseVNode("div",_hoisted_8,[createBaseVNode("button",{class:"btn btn-success float-right",onClick:e[0]||(e[0]=(...r)=>a.addHint&&a.addHint(...r))}," Create Hint ")])])}const HintsList=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),_sfc_main={props:{challenge_id:Number},data:function(){return{challenge:null,challenges:[],selected_id:null}},computed:{updateAvailable:function(){return this.challenge?this.selected_id!=this.challenge.next_id:!1},otherChallenges:function(){return this.challenges.filter(t=>t.id!==this.$props.challenge_id)}},methods:{loadData:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}`,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.challenge=t.data,this.selected_id=t.data.next_id)})},loadChallenges:function(){CTFd$1.fetch("/api/v1/challenges?view=admin",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(this.challenges=t.data)})},updateNext:function(){CTFd$1.fetch(`/api/v1/challenges/${this.$props.challenge_id}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({next_id:this.selected_id!="null"?this.selected_id:null})}).then(t=>t.json()).then(t=>{t.success&&(this.loadData(),this.loadChallenges())})}},created(){this.loadData(),this.loadChallenges()}},_hoisted_1={class:"form-group"},_hoisted_2=["value"],_hoisted_3={class:"form-group"},_hoisted_4=["disabled"];function _sfc_render(t,e,o,n,i,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("form",{onSubmit:e[1]||(e[1]=withModifiers((...s)=>a.updateNext&&a.updateNext(...s),["prevent"]))},[createBaseVNode("div",_hoisted_1,[e[3]||(e[3]=createBaseVNode("label",null,[createTextVNode(" Next Challenge "),createBaseVNode("br"),createBaseVNode("small",{class:"text-muted"},"Challenge to recommend after solving this challenge")],-1)),withDirectives(createBaseVNode("select",{class:"form-control custom-select","onUpdate:modelValue":e[0]||(e[0]=s=>t.selected_id=s)},[e[2]||(e[2]=createBaseVNode("option",{value:"null"},"--",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.otherChallenges,s=>(openBlock(),createElementBlock("option",{value:s.id,key:s.id},toDisplayString(s.name),9,_hoisted_2))),128))],512),[[vModelSelect,t.selected_id]])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("button",{class:"btn btn-success float-right",disabled:!a.updateAvailable}," Save ",8,_hoisted_4)])],32)])}const NextChallenge=_export_sfc(_sfc_main,[["render",_sfc_render]]);function loadChalTemplate(t){CTFd$1._internal.challenge={},$$1.getScript(CTFd$1.config.urlRoot+t.scripts.view,function(){let e=t.create;$$1("#create-chal-entry-div").html(e),bindMarkdownEditors(),$$1.getScript(CTFd$1.config.urlRoot+t.scripts.create,function(){$$1("#create-chal-entry-div form").submit(function(o){o.preventDefault();const n=$$1("#create-chal-entry-div form").serializeJSON();CTFd$1.fetch("/userchallenge/api/challenges/",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(i){return i.json()}).then(function(i){if(i.success)$$1("#challenge-create-options #challenge_id").val(i.data.id),$$1("#challenge-create-options").modal();else{let a="";for(const s in i.errors)a+=i.errors[s].join(`
`),a+=`
`;ezAlert({title:"Error",body:a,button:"OK"})}})})})})}function handleChallengeOptions(t){t.preventDefault();var e=$$1(t.target).serializeJSON(!0);let o={challenge_id:e.challenge_id,content:e.flag||"",type:e.flag_type,data:e.flag_data?e.flag_data:""},n=function(){CTFd$1.fetch("/userchallenge/api/challenges/"+e.challenge_id,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({state:e.state})}).then(function(i){return i.json()}).then(function(i){i.success&&setTimeout(function(){window.location=CTFd$1.config.urlRoot+"/userchallenge/challenges/"+e.challenge_id},700)})};Promise.all([new Promise(function(i,a){if(o.content.length==0){i();return}CTFd$1.fetch("/userchallenge/api/flags",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(s){i(s.json())})}),new Promise(function(i,a){let s=t.target,d={challenge:e.challenge_id,type:"challenge"};$$1(s.elements.file).val()&&helpers.files.upload(s,d),i()})]).then(i=>{n()})}$$1(()=>{if($$1(".preview-challenge").click(function(t){let e=`/userchallenge/challenges/preview/${window.CHALLENGE_ID}`;$$1("#challenge-window").html(`<iframe src="${e}" height="100%" width="100%" frameBorder=0></iframe>`),$$1("#challenge-modal").modal()}),$$1(".comments-challenge").click(function(t){$$1("#challenge-comments-window").modal()}),$$1(".delete-challenge").click(function(t){ezQuery({title:"Delete Challenge",body:`Are you sure you want to delete <strong>${htmlEntities(window.CHALLENGE_NAME)}</strong>`,success:function(){CTFd$1.fetch("/userchallenge/api/challenges/"+window.CHALLENGE_ID,{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){e.success&&(window.location=CTFd$1.config.urlRoot+"/admin/challenges")})}})}),$$1("#challenge-update-container > form").submit(function(t){t.preventDefault();var e=$$1(t.target).serializeJSON(!0);CTFd$1.fetch("/userchallenge/api/challenges/"+window.CHALLENGE_ID+"/flags",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(o){return o.json()}).then(function(o){let n=function(){CTFd$1.fetch("/userchallenge/api/challenges/"+window.CHALLENGE_ID,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(i){return i.json()}).then(function(i){if(i.success){switch($$1(".challenge-state").text(i.data.state),i.data.state){case"visible":$$1(".challenge-state").removeClass("badge-danger").addClass("badge-success");break;case"hidden":$$1(".challenge-state").removeClass("badge-success").addClass("badge-danger");break}ezToast({title:"Success",body:"Your challenge has been updated!"})}else{let a="";for(const s in i.errors)a+=i.errors[s].join(`
`),a+=`
`;ezAlert({title:"Error",body:a,button:"OK"})}})};o.data.length===0&&e.state==="visible"?ezQuery({title:"Missing Flags",body:"This challenge does not have any flags meaning it may be unsolveable. Are you sure you'd like to update this challenge?",success:n}):n()})}),$$1("#challenge-create-options form").submit(handleChallengeOptions),document.querySelector("#challenge-flags")){const t=Vue.extend(FlagList);let e=document.createElement("div");document.querySelector("#challenge-flags").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#challenge-topics")){const t=Vue.extend(TopicsList);let e=document.createElement("div");document.querySelector("#challenge-topics").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#challenge-tags")){const t=Vue.extend(TagsList);let e=document.createElement("div");document.querySelector("#challenge-tags").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#prerequisite-add-form")){const t=Vue.extend(Requirements);let e=document.createElement("div");document.querySelector("#prerequisite-add-form").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#challenge-files")){const t=Vue.extend(ChallengeFilesList);let e=document.createElement("div");document.querySelector("#challenge-files").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#challenge-hints")){const t=Vue.extend(HintsList);let e=document.createElement("div");document.querySelector("#challenge-hints").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#next-add-form")){const t=Vue.extend(NextChallenge);let e=document.createElement("div");document.querySelector("#next-add-form").appendChild(e),new t({propsData:{challenge_id:window.CHALLENGE_ID}}).$mount(e)}if(document.querySelector("#comment-box")){const t=Vue.extend(CommentBox);let e=document.createElement("div");document.querySelector("#comment-box").appendChild(e),new t({propsData:{type:"challenge",id:window.CHALLENGE_ID}}).$mount(e)}$$1.get("/userchallenge/api/challenges/types",function(t){const e=t.data;loadChalTemplate(e.standard),$$1("#create-chals-select input[name=type]").change(function(){let o=e[this.value];loadChalTemplate(o)})})});
