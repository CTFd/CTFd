(function(a,b){typeof exports==='object'&&typeof module!=='undefined'?b(exports):typeof define==='function'&&define.amd?define(['exports'],b):(b((a.WHATWGFetch={})));}(this,(function(a){'use strict';var b={searchParams:'URLSearchParams' in self,iterable:'Symbol' in self&&'iterator' in Symbol,blob:'FileReader' in self&&'Blob' in self&&(function(){try{new Blob();return true;}catch(a){return false;}})(),formData:'FormData' in self,arrayBuffer:'ArrayBuffer' in self};function c(a){return a&&DataView.prototype.isPrototypeOf(a);}if(b.arrayBuffer){var d=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'];var e=ArrayBuffer.isView||function(a){return a&&d.indexOf(Object.prototype.toString.call(a))>-1;};}function f(a){if(typeof a!=='string')a=String(a);if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError('Invalid character in header field name');return a.toLowerCase();}function g(a){if(typeof a!=='string')a=String(a);return a;}function h(a){var c={next:function(){var b=a.shift();return{done:b===undefined,value:b};}};if(b.iterable)c[Symbol.iterator]=function(){return c;};return c;}function i(a){this.map={};if(a instanceof i)a.forEach(function(a,b){this.append(b,a);},this);else if(Array.isArray(a))a.forEach(function(a){this.append(a[0],a[1]);},this);else if(a)Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b]);},this);}i.prototype.append=function(a,b){a=f(a);b=g(b);var c=this.map[a];this.map[a]=c?c+', '+b:b;};i.prototype['delete']=function(a){delete this.map[f(a)];};i.prototype.get=function(a){a=f(a);return this.has(a)?this.map[a]:null;};i.prototype.has=function(a){return this.map.hasOwnProperty(f(a));};i.prototype.set=function(a,b){this.map[f(a)]=g(b);};i.prototype.forEach=function(a,b){for(var c in this.map)if(this.map.hasOwnProperty(c))a.call(b,this.map[c],c,this);};i.prototype.keys=function(){var a=[];this.forEach(function(b,c){a.push(c);});return h(a);};i.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b);});return h(a);};i.prototype.entries=function(){var a=[];this.forEach(function(b,c){a.push([c,b]);});return h(a);};if(b.iterable)i.prototype[Symbol.iterator]=i.prototype.entries;function j(a){if(a.bodyUsed)return Promise.reject(new TypeError('Already read'));a.bodyUsed=true;}function k(a){return new Promise(function(b,c){a.onload=function(){b(a.result);};a.onerror=function(){c(a.error);};});}function l(a){var b=new FileReader();var c=k(b);b.readAsArrayBuffer(a);return c;}function m(a){var b=new FileReader();var c=k(b);b.readAsText(a);return c;}function n(a){var b=new Uint8Array(a);var c=new Array(b.length);for(var d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);return c.join('');}function o(a){if(a.slice)return a.slice(0);else{var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer;}}function p(){this.bodyUsed=false;this._initBody=function(a){this._bodyInit=a;if(!a)this._bodyText='';else if(typeof a==='string')this._bodyText=a;else if(b.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(b.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(b.arrayBuffer&&b.blob&&c(a)){this._bodyArrayBuffer=o(a.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer]);}else if(b.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||e(a)))this._bodyArrayBuffer=o(a);else this._bodyText=a=Object.prototype.toString.call(a);if(!this.headers.get('content-type'))if(typeof a==='string')this.headers.set('content-type','text/plain;charset=UTF-8');else if(this._bodyBlob&&this._bodyBlob.type)this.headers.set('content-type',this._bodyBlob.type);else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8');};if(b.blob){this.blob=function(){var a=j(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);else if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));else if(this._bodyFormData)throw new Error('could not read FormData body as blob');else return Promise.resolve(new Blob([this._bodyText]));};this.arrayBuffer=function(){if(this._bodyArrayBuffer)return j(this)||Promise.resolve(this._bodyArrayBuffer);else return this.blob().then(l);};}this.text=function(){var a=j(this);if(a)return a;if(this._bodyBlob)return m(this._bodyBlob);else if(this._bodyArrayBuffer)return Promise.resolve(n(this._bodyArrayBuffer));else if(this._bodyFormData)throw new Error('could not read FormData body as text');else return Promise.resolve(this._bodyText);};if(b.formData)this.formData=function(){return this.text().then(t);};this.json=function(){return this.text().then(JSON.parse);};return this;}var q=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];function r(a){var b=a.toUpperCase();return q.indexOf(b)>-1?b:a;}function s(a,b){b=b||{};var c=b.body;if(a instanceof s){if(a.bodyUsed)throw new TypeError('Already read');this.url=a.url;this.credentials=a.credentials;if(!b.headers)this.headers=new i(a.headers);this.method=a.method;this.mode=a.mode;this.signal=a.signal;if(!c&&a._bodyInit!=null){c=a._bodyInit;a.bodyUsed=true;}}else this.url=String(a);this.credentials=b.credentials||this.credentials||'same-origin';if(b.headers||!this.headers)this.headers=new i(b.headers);this.method=r(b.method||this.method||'GET');this.mode=b.mode||this.mode||null;this.signal=b.signal||this.signal;this.referrer=null;if((this.method==='GET'||this.method==='HEAD')&&c)throw new TypeError('Body not allowed for GET or HEAD requests');this._initBody(c);}s.prototype.clone=function(){return new s(this,{body:this._bodyInit});};function t(a){var b=new FormData();a.trim().split('&').forEach(function(a){if(a){var c=a.split('=');var d=c.shift().replace(/\+/g,' ');var e=c.join('=').replace(/\+/g,' ');b.append(decodeURIComponent(d),decodeURIComponent(e));}});return b;}function u(a){var b=new i();var c=a.replace(/\r?\n[\t ]+/g,' ');c.split(/\r?\n/).forEach(function(a){var c=a.split(':');var d=c.shift().trim();if(d){var e=c.join(':').trim();b.append(d,e);}});return b;}p.call(s.prototype);function v(a,b){if(!b)b={};this.type='default';this.status=b.status===undefined?200:b.status;this.ok=this.status>=200&&this.status<300;this.statusText='statusText' in b?b.statusText:'OK';this.headers=new i(b.headers);this.url=b.url||'';this._initBody(a);}p.call(v.prototype);v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url});};v.error=function(){var a=new v(null,{status:0,statusText:''});a.type='error';return a;};var w=[301,302,303,307,308];v.redirect=function(a,b){if(w.indexOf(b)===-1)throw new RangeError('Invalid status code');return new v(null,{status:b,headers:{location:a}});};a.DOMException=self.DOMException;try{new a.DOMException();}catch(x){a.DOMException=function(a,b){this.message=a;this.name=b;var c=Error(a);this.stack=c.stack;};a.DOMException.prototype=Object.create(Error.prototype);a.DOMException.prototype.constructor=a.DOMException;}function y(c,d){return new Promise(function(e,f){var g=new s(c,d);if(g.signal&&g.signal.aborted)return f(new a.DOMException('Aborted','AbortError'));var h=new XMLHttpRequest();function i(){h.abort();}h.onload=function(){var a={status:h.status,statusText:h.statusText,headers:u(h.getAllResponseHeaders()||'')};a.url='responseURL' in h?h.responseURL:a.headers.get('X-Request-URL');var b='response' in h?h.response:h.responseText;e(new v(b,a));};h.onerror=function(){f(new TypeError('Network request failed'));};h.ontimeout=function(){f(new TypeError('Network request failed'));};h.onabort=function(){f(new a.DOMException('Aborted','AbortError'));};h.open(g.method,g.url,true);if(g.credentials==='include')h.withCredentials=true;else if(g.credentials==='omit')h.withCredentials=false;if('responseType' in h&&b.blob)h.responseType='blob';g.headers.forEach(function(a,b){h.setRequestHeader(b,a);});if(g.signal){g.signal.addEventListener('abort',i);h.onreadystatechange=function(){if(h.readyState===4)g.signal.removeEventListener('abort',i);};}h.send(typeof g._bodyInit==='undefined'?null:g._bodyInit);});}y.polyfill=true;if(!self.fetch){self.fetch=y;self.Headers=i;self.Request=s;self.Response=v;}a.Headers=i;a.Request=s;a.Response=v;a.fetch=y;Object.defineProperty(a,'__esModule',{value:true});})));